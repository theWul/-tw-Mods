<?xml version="1.0" encoding="utf-8" ?>
<Defs>
     <DamageDef Name="BluntBase">
          <defName>WeaponStunBlunt</defName>
          <label>Stun smash</label>
          <workerClass>DamageWorker_Blunt</workerClass>
          <externalViolence>false</externalViolence>
          <deathMessage>{0} got hit too hard.</deathMessage>
          <hediff>Crush</hediff>
          <hediffSkin>Bruise</hediffSkin>
          <hediffSolid>Crack</hediffSolid>
          <harmAllLayersUntilOutside>true</harmAllLayersUntilOutside>
          <impactSoundType>Blunt</impactSoundType>
          <armorCategory>Blunt</armorCategory>
          <overkillPctToDestroyPart>0.4~1.0</overkillPctToDestroyPart>
          <buildingDamageFactor>0.5</buildingDamageFactor>
          <bluntStunDuration>2.0</bluntStunDuration>
          <bluntInnerHitChance>0.2</bluntInnerHitChance>
          <bluntInnerHitDamageFractionToConvert>
               <min>0.1</min>
               <max>0.2</max>
          </bluntInnerHitDamageFractionToConvert>
          <bluntInnerHitDamageFractionToAdd>
               <min>0.1</min>
               <max>0.25</max>
          </bluntInnerHitDamageFractionToAdd>
          <bluntStunChancePerDamagePctOfCorePartToHeadCurve>
               <points>
                    <li>(0.04, 0.20)</li>
                    <li>(0.5, 1)</li>
               </points>
          </bluntStunChancePerDamagePctOfCorePartToHeadCurve>
          <bluntStunChancePerDamagePctOfCorePartToBodyCurve>
               <points>
                    <li>(0.4, 0)</li>
                    <li>(0.9, 0.15)</li>
               </points>
          </bluntStunChancePerDamagePctOfCorePartToBodyCurve>
          <additionalHediffs>
               <li>
                    <hediff>MeleeStunnedBuildup</hediff>
                    <severityPerDamageDealt>0.02</severityPerDamageDealt>
                    <victimSeverityScaling>ToxicSensitivity</victimSeverityScaling>
               </li>
          </additionalHediffs>
     </DamageDef>

     <ManeuverDef>
          <defName>WeaponStunBlunt</defName>
          <requiredCapacity>WeaponStunBlunt</requiredCapacity>
          <verb>
               <verbClass>Verb_MeleeAttackDamage</verbClass>
               <meleeDamageDef>WeaponStunBlunt</meleeDamageDef>
          </verb>
          <logEntryDef>MeleeAttack</logEntryDef>
          <combatLogRulesHit>Maneuver_Smash_MeleeHit</combatLogRulesHit>
          <combatLogRulesDeflect>Maneuver_Smash_MeleeDeflect</combatLogRulesDeflect>
          <combatLogRulesMiss>Maneuver_Smash_MeleeMiss</combatLogRulesMiss>
          <combatLogRulesDodge>Maneuver_Smash_MeleeDodge</combatLogRulesDodge>
     </ManeuverDef>


     <ToolCapacityDef>
          <defName>WeaponStunBlunt</defName>
     </ToolCapacityDef>

     <HediffDef>
          <defName>MeleeStunnedBuildup</defName>
          <hediffClass>HediffWithComps</hediffClass>
          <defaultLabelColor>(0.75, 0.45, 0.25)</defaultLabelColor>
          <label>Betäubung</label>
          <lethalSeverity>1.8</lethalSeverity>
          <initialSeverity>0.05</initialSeverity>
          <makesSickThought>true</makesSickThought>
          <scenarioCanAdd>false</scenarioCanAdd>
          <taleOnVisible>ToxicityRevealed</taleOnVisible>
          <tendable>true</tendable>
          <comps>
               <li Class="HediffCompProperties_TendDuration">
                    <baseTendDurationHours>18</baseTendDurationHours>
                    <severityPerDayTended>-30.0</severityPerDayTended>
               </li>
               <li Class="HediffCompProperties_Immunizable">
                    <severityPerDayNotImmune>1.25</severityPerDayNotImmune>
               </li>
          </comps>
          <stages>
               <li>
                    <label>Dazed(Beginn)</label>
                    <becomeVisible>true</becomeVisible>
                    <painOffset>-0.4</painOffset>
                    <capMods>
                         <li>
                              <capacity>Consciousness</capacity>
                              <offset>-0.1</offset>
                              <!-- 0.9 -->
                         </li>
                         <li>
                              <capacity>Breathing</capacity>
                              <offset>-0.1</offset>
                         </li>
                         <li>
                              <capacity>Moving</capacity>
                              <offset>-0.15</offset>
                              <!-- 0.4-->
                         </li>
                    </capMods>
               </li>
               <li>
                    <label>Dazed(Easy)</label>
                    <minSeverity>0.10</minSeverity>
                    <painOffset>-0.5</painOffset>
                    <capMods>
                         <li>
                              <capacity>Consciousness</capacity>
                              <offset>-0.15</offset>
                              <!-- 0.75 -->
                         </li>
                         <li>
                              <capacity>Breathing</capacity>
                              <offset>-0.2</offset>
                         </li>
                         <li>
                              <capacity>Moving</capacity>
                              <offset>-0.2</offset>
                              <!-- 0.2 -->
                         </li>
                    </capMods>
               </li>
               <li>
                    <label>Dazed(Medium)</label>
                    <minSeverity>0.5</minSeverity>
                    <painOffset>-0.6</painOffset>
                    <capMods>
                         <li>
                              <capacity>Consciousness</capacity>
                              <offset>-0.25</offset>
                              <!-- 0.5 -->
                         </li>
                         <li>
                              <capacity>Breathing</capacity>
                              <offset>-0.3</offset>
                         </li>
                         <li>
                              <capacity>Moving</capacity>
                              <offset>-0.3</offset>
                              <!-- 0.15 -->
                         </li>
                    </capMods>
                    <hediffGivers>
                         <li Class="HediffGiver_Random">
                              <hediff>Dementia</hediff>
                              <mtbDays>413</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>Carcinoma</hediff>
                              <mtbDays>420</mtbDays>
                              <canAffectAnyLivePart>true</canAffectAnyLivePart>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageModerate</hediff>
                              <mtbDays>150</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageModerate</hediff>
                              <mtbDays>120</mtbDays>
                              <partsToAffect>
                                   <li>Kidney</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>HeartArteryBlockage</hediff>
                              <mtbDays>220</mtbDays>
                              <partsToAffect>
                                   <li>Heart</li>
                              </partsToAffect>
                         </li>
                    </hediffGivers>
               </li>
               <li>
                    <label>Dazed(High)</label>
                    <minSeverity>0.75</minSeverity>
                    <painOffset>-0.75</painOffset>
                    <capMods>
                         <li>
                              <capacity>Consciousness</capacity>
                              <offset>-0.5</offset>
                              <!-- 0.29 -->
                         </li>
                         <li>
                              <capacity>Breathing</capacity>
                              <offset>-0.4</offset>
                         </li>
                         <li>
                              <capacity>Moving</capacity>
                              <offset>-0.5</offset>
                              <!-- 0.1 -->
                         </li>
                    </capMods>
                    <hediffGivers>
                         <li Class="HediffGiver_Random">
                              <hediff>Dementia</hediff>
                              <mtbDays>125</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>Carcinoma</hediff>
                              <mtbDays>255</mtbDays>
                              <canAffectAnyLivePart>true</canAffectAnyLivePart>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageSevere</hediff>
                              <mtbDays>42</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageSevere</hediff>
                              <mtbDays>65</mtbDays>
                              <partsToAffect>
                                   <li>Kidney</li>
                              </partsToAffect>
                         </li>
                    </hediffGivers>
               </li>
               <li>
                    <label>Dazed(Very High)</label>
                    <minSeverity>0.9</minSeverity>
                    <painOffset>-0.9</painOffset>
                    <capMods>
                         <li>
                              <capacity>Consciousness</capacity>
                              <offset>-0.75</offset>
                              <!-- 0.26 -->
                         </li>
                         <li>
                              <capacity>Breathing</capacity>
                              <offset>-0.5</offset>
                         </li>
                         <li>
                              <capacity>Moving</capacity>
                              <offset>-0.7</offset>
                              <!-- 0.05 -->
                         </li>
                    </capMods>
                    <hediffGivers>
                         <li Class="HediffGiver_Random">
                              <hediff>Dementia</hediff>
                              <mtbDays>85</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>Carcinoma</hediff>
                              <mtbDays>195</mtbDays>
                              <canAffectAnyLivePart>true</canAffectAnyLivePart>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageSevere</hediff>
                              <mtbDays>31</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageSevere</hediff>
                              <mtbDays>45</mtbDays>
                              <partsToAffect>
                                   <li>Kidney</li>
                              </partsToAffect>
                         </li>
                    </hediffGivers>
               </li>
               <li>
                    <label>Dazed(Extreme)</label>
                    <minSeverity>1.2</minSeverity>
                    <painOffset>-1.0</painOffset>
                    <capMods>
                         <li>
                              <capacity>Consciousness</capacity>
                              <offset>-0.8</offset>
                              <!-- 0.9 -->
                         </li>
                         <li>
                              <capacity>Breathing</capacity>
                              <offset>-0.75</offset>
                         </li>
                         <li>
                              <capacity>Moving</capacity>
                              <setMax>0</setMax>
                         </li>
                    </capMods>
                    <hediffGivers>
                         <li Class="HediffGiver_Random">
                              <hediff>Dementia</hediff>
                              <mtbDays>12</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>Carcinoma</hediff>
                              <mtbDays>18</mtbDays>
                              <canAffectAnyLivePart>true</canAffectAnyLivePart>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageSevere</hediff>
                              <mtbDays>8</mtbDays>
                              <partsToAffect>
                                   <li>Brain</li>
                              </partsToAffect>
                         </li>
                         <li Class="HediffGiver_Random">
                              <hediff>ChemicalDamageSevere</hediff>
                              <mtbDays>4</mtbDays>
                              <partsToAffect>
                                   <li>Kidney</li>
                              </partsToAffect>
                         </li>
                    </hediffGivers>
               </li>
          </stages>
     </HediffDef>

     <ThingDef ParentName="BaseMeleeWeapon_Sharp_Quality">
          <defName>MeleeWeapon_Stun</defName>
          <label>Stun Rod</label>
          <techLevel>Neolithic</techLevel>
          <description>A stun rod - make your target unconscious.</description>
          <graphicData>
               <texPath>club_stun_melee</texPath>
               <graphicClass>Graphic_Single</graphicClass>
          </graphicData>
          <weaponTags>
               <li>MedievalMeleeAdvanced</li>
               <li>NeolithicMeleeAdvanced</li>
          </weaponTags>
          <costStuffCount>90</costStuffCount>
          <statBases>
               <MarketValue>95000</MarketValue>
               <WorkToMake>155000</WorkToMake>
               <Mass>0.75</Mass>
          </statBases>
          <equippedAngleOffset>-65</equippedAngleOffset>
          <stuffCategories>
               <li>Metallic</li>
          </stuffCategories>
          <tools>
               <li>
                    <label>head</label>
                    <labelUsedInLogging>false</labelUsedInLogging>
                    <capacities>
                         <li>WeaponStunBlunt</li>
                    </capacities>
                    <power>5</power>
                    <cooldownTime>1.0</cooldownTime>
                    <surpriseAttack>
                         <extraMeleeDamages>
                              <li>
                                   <def>Stun</def>
                                   <amount>50</amount>
                              </li>
                         </extraMeleeDamages>
                    </surpriseAttack>
               </li>
          </tools>
          <recipeMaker>
               <recipeUsers>
                    <li>ElectricSmithy</li>
                    <li>FueledSmithy</li>
               </recipeUsers>
               <skillRequirements>
                    <Crafting>8</Crafting>
               </skillRequirements>
          </recipeMaker>
          <costList>
               <ComponentIndustrial>5</ComponentIndustrial>
               <Jade>10</Jade>
          </costList>
          <generateCommonality>0.01</generateCommonality>
          <tradeTags>
               <li>Exotic</li>
          </tradeTags>
     </ThingDef>


</Defs>
